function do_the_deus_magic(e,a,s,t,d,l,o,i,r,n){$("#deus_loader span").text("Patientez quelques instants, on recherche les jeux vidéo qui vous correspondent."),$.ajax({method:"POST",url:r+"deus_get_games.php",data:{genres:e,price_max:n,keywords:o,platform:a,recent_date:s,oldest_date:t},success:function(e){if((e=JSON.parse(e)).length>0){for(var a=0,s=[],t=0;t<e.length;t++)if(a<l){s[a]=e[t].id;var o=e[t].rating;e[t].genres&&e[t].genres[0].name;var n=e[t].img_url,m="",p="",c="",_='<p class="deus_result_price m-0 p-0 pl-2 pr-2" data-toggle="tooltip" data-placement="top" title="Prix non définitif">',g="";e[t].clip_url.length>1&&(m='<video class="deus_video" id="video_player" controls loop muted width="250"><source src="'+e[t].clip_url+'" type="video/mp4"> Sorry, your browser doesn\'t support embedded videos.</video>'),e[t].num_tags&&(g='<p class="deus_same_val pb-0" ><span>'+e[t].num_tags+"</span> préférence(s) </p>"),1!=e[t].gamepass||(p='<p class="deus_result_price gmp m-0 p-0 pl-2 pr-2"> GamePass </p>'),1!=e[t].psnow||(c='<p class="deus_result_price gmp psn m-0 p-0 pl-2 pr-2"> GamePass </p>'),null===e[t].deal_url?_+=" ?? € </p>":_=_+"≈ "+e[t].deal_price+" €</p>";var u=e[t].id_rawg,h='background-image:url("'+n+'");',v="";null!==e[t].deal_url&&(v='game_best_price="'+e[t].deal_price+'" game_best_url="'+e[t].deal_url+'"'),$("#"+d).append('<div class="game-item deus_result" style='+h+' game_id="'+u+'"  data-toggle="modal" data-target="#game_modal" '+v+' id="game">                             <a class="game_url">                                <div class="game_deus_bg"></div>                                <a class="game_link">                                     <div class="game-content">                                         <div class="game-content-body">                                             <h3 class="title">'+e[t].game_name+'</h3>                                            <p class="deus_same_val pb-0" ><span>'+e[t].num_genres+"</span> genre(s) </p>                                            "+g+'                                        </div>                                     </div>                                     <i class="fas fa-long-arrow-alt-right deus_see_more" title="Plus d\'informations sur le jeu"></i>                                    <span class="deus_see_more game_rating" title="Note du jeu">'+parseInt(20*o)+'<i class="fas fa-star"></i> </span>                                    '+_+"                                    "+m+"                                    "+p+"                                    "+c+"                                </a>                             </a>                            </div>"),a++}$.ajax({method:"POST",url:r+"saveresults.php",data:{unic_id:i,results:s}})}else $("#"+d).append("<p> Aucun résultat sur cette tranche temporelle. </p>")},async:!1})}function share_fb(e,a){window.open("https://www.facebook.com/sharer/sharer.php?u="+e+"&quote="+a,"facebook-share-dialog","width=626, height=436")}$(document).ready(function(){$("#searchbox").on("keyup",function(){var e=$(this).val();$.ajax({method:"POST",url:"simple_search.php",data:{title:e},success:function(e){$("#search_result").empty(),$("#search_result").append(e)}})}),$(".deus_radio").click(function(){$(this).siblings().removeClass("active"),$(this).addClass("active")}),$("#price_max").change(function(){$("#price_container").text($(this).val()+" €")});$(".key_cloud_check").on("change",function(e){$(".key_cloud_check:checked").length>=4&&(this.checked=!1)}),$("#platform").change(function(){4==$("#platform").val()?$(".pc_price").show():$(".pc_price").hide()}),$(".deus_results_page #game, .home #game").click(function(){var e=$(this).attr("game_id"),a="";$(this).attr("game_best_url")&&(a=$(this).attr("game_best_url"));var s=0;$(this).attr("game_best_price")&&(s=$(this).attr("game_best_price")),$.ajax({method:"GET",url:"https://api.rawg.io/api/games/"+e,success:function(e){$("#modal_descr i").addClass("fa-plus").removeClass("fa-minus"),$("#game_modal #genres,#game_modal .description, #game_stores, #game_modal #video").empty(),$(".modal-content #game_description_modal").removeClass("active"),$("#game_modal .modal-title").text(e.name),$("#game_modal .modal_link").attr("href",e.website);var t=20*e.rating;for($("#game_modal #note").text(Math.round(t)),$("#game_modal .modal-body").css("background-image","url("+e.background_image+")"),i_genres=0;i_genres<e.genres.length;i_genres++)$("#game_modal #genres").append('<span class="badge badge-primary mr-2">'+e.genres[i_genres].name+"</span>");var d=$("html").attr("lang");const l=JSON.stringify({q:e.description,source:"en",target:d}),o=new XMLHttpRequest;for(o.withCredentials=!0,o.addEventListener("readystatechange",function(){if(this.readyState===this.DONE){var e=JSON.parse(this.responseText);$("#game_modal .modal-body #game_description_modal").html(e.data.translations.translatedText)}}),o.open("POST","https://deep-translate1.p.rapidapi.com/language/translate/v2"),o.setRequestHeader("content-type","application/json"),o.setRequestHeader("x-rapidapi-key","4d829797f8msh43a17d4bae9eaecp1bc4edjsn3331d3d707d0"),o.setRequestHeader("x-rapidapi-host","deep-translate1.p.rapidapi.com"),o.send(l),$("#game_modal .modal-body #game_description_modal").html(e.description),i_link=0;i_link<e.stores.length;i_link++)$("#game_modal .modal-body #game_stores").append('<a class="btn mb-1 btn-sm g_link btn-dark" target="_blank" href="'+e.stores[i_link].url+' "> '+e.stores[i_link].store.name+" </a>");a.length>1&&$("#game_modal .modal-body #game_stores").append('<a class="golden btn mb-1 btn-sm g_link btn-dark" target="_blank" href="'+a+' "> ≈ '+s+" €</a>"),null!==e.clip?($("#game_modal .modal-body #video").append('<video controls><source src="'+e.clip.clip+'" type="video/mp4"> Sorry, your browser doesn\'t support embedded videos.</video>'),game_have_video=!0,null!==e.clip.video&&$("#game_modal .modal-body #video").append('<iframe width="560" height="315" src="https://www.youtube.com/embed/'+e.clip.video+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>')):$("#game_modal .modal-body #video").append(" 0 Media ")}})}),$(".deus_results_page #game_modal").on("hidden.bs.modal",function(e){$("#game_modal #video").empty()}),$("#mobile_profile_button_slider").click(function(){$("#mobile_profile_slider").toggleClass("active")})}),$(".modal-content #modal_descr").click(function(){$(".modal-content #game_description_modal").toggleClass("active"),$(".modal-content #game_description_modal").hasClass("active")?$("#modal_descr i").removeClass("fa-plus").addClass("fa-minus"):$("#modal_descr i").addClass("fa-plus").removeClass("fa-minus")});